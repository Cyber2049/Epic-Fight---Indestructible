// 
// warnning
// Only used as a tutorial and cannot be used directly
//

{
	"model": "epicfight:entity/skeleton",
	"armature": "epicfight:entity/skeleton",
	"renderer": "skeleton",
	"isHumanoid": true,
	"faction": "undead",
	"advanced": true, 			//set to true for allowing all stuff in this mod. otherwise it just a efm custom entity. default: false
	"attributes": {				//The attributes below "scale" are all optional
		"impact": 2.5,
		"armor_negation": 5.0,
		"max_strikes": 3,
		"chasing_speed": 0.90,
        "scale": 1.3,
		"max_stamina": 15, 				//max stamina of this mob，default:15
		"stamina_regan_multiply": 1.0, 	//stamina recovery rate，default:1
		"stamina_regan_delay": 30,  	//stamina recovery delay(tick) after action, default:30
		"has_stun_reduction": true, 	 //stun reduction provider by efm, reduce the penalty for stun based on how many times mob get stun in a short period of time
		"max_stun_shield": 0, 			 //max stun shield，default:0 mean mob dose not has stun shield。set it to greater than 0 to make mob have stun shield which can prevent mob from getting stun.
		"stun_shield_regan_multiply": 1, //stun shield recovery rate, only make sense when mob has stun shield,default:1.  actual recovery rate: （3% x this rate）/s
		"stun_shield_regan_delay": 30, 	//stun recovery delay(tick) when stun shield is depleted, only make sense when mob has stun shield,default: 30 
		"stamina_lose_multiply": 0 		//default:0 means this mechanism is turned off. set it to greater than 0 to allow mob to lose stamina based on impact after being hit.
	},
	"default_livingmotions": {
		"idle": "epicfight:biped/living/idle",
		"walk": "epicfight:biped/living/walk",
		"chase": "epicfight:biped/living/walk",
		"death": "epicfight:biped/living/death"
	},
	"humanoid_weapon_motions": [
		  {
			"weapon_categories": ["axe", "hoe", "pickaxe", "shovel", "sword"],
			"style":"common",
			"livingmotions": {
				"chase": "epicfight:biped/living/hold_longsword",
                "walk": "epicfight:biped/living/walk"
			}
		  },
              { 
                  "weapon_categories": ["longsword"],
                  "style":"common", 
                  "livingmotions": {
                        "chase": "epicfight:biped/living/hold_longsword",
                        "walk": "epicfight:biped/living/hold_longsword"
                  }
              }
	],
	"custom_guard_motion": [										//mandatory for mob to guard
            { 
                  "weapon_categories": ["longsword","tachi","sword"],//mandatory
                  "style":"common", 								//mandatory
                  "guard": "indestructible:guard/guard_longsword"	,//mandatory, guard animation
				  "stamina_cost_multiply": 1, 						//optional, default: 1, stamina consumption rate on guard
				  "can_block_projectile" : false 					//optional
            }
	],
	"stun_animations": {
		"short": "epicfight:biped/combat/hit_short",
		"long": "epicfight:biped/combat/hit_long",
		"knockdown": "epicfight:biped/combat/knockdown",
		"fall": "epicfight:biped/living/landing"
	},
	"combat_behavior": [
            {
			"weapon_categories": ["sword","longsword"],
			"style": "common",
			"behavior_series": [
				{
					"weight": 1.5,
					"canBeInterrupted": true,
					"looping": false,
					"behaviors": [
						{
							"conditions": [
								{"predicate":"within_eye_height"}, {"predicate":"within_distance", "min": 3.0, "max": 5.0}
							],
							"guard": 60, 							//mandatory
							"counter": "indestructible:guard/knee", //optional, counter animation
							"counter_cost": 3, 						//stamina consumption on counter
							"counter_chance": 0.3, 					//optional, counter chance
							"counter_speed": 1 						//optional, counter speed
						}
                        ]                 
				},
				{
					"weight": 1.5,
					"canBeInterrupted": true,
					"looping": false,
					"behaviors": [
						{
							"conditions": [
								{"predicate":"within_eye_height"}, {"predicate":"within_distance", "min": 0.0, "max": 5.0}
							],
							"animation": "epicfight:wither_skeleton/sword_attack1", //mandatory
							"play_speed": 1.1, 										//optional attack speed
							"stamina": 0, 											//stamina consumption
							"convert_time": 0, 										//convert time between this animation and the previous one
							"command_list": [																//optional, command list
								{"time":0.5, "command":"give @s minecraft:stick", "execute_at_target":true}	 	//command event， set execute_at_target to true means command will execute on mob's ,false means self.
							]
						},
						{
							"conditions": [
								{"predicate":"within_eye_height"}
							],
							"animation": "epicfight:wither_skeleton/sword_attack2",
							"play_speed": 1.1
						},
						{
							"conditions": [
								{"predicate":"within_eye_height"}, 
								{"predicate":"within_distance", "min": 3.0, "max": 8.0}, 
								{"predicate":"within_angle", "min": -30.0, "max": 30.0}
							],
							"animation": "epicfight:biped/combat/longsword_dash",
							"convert_time": 0.15
						}
                        ]                 
				},
				{
					"weight": 1.5,
					"canBeInterrupted": true,
					"looping": false,
					"behaviors": [
						{
							"conditions": [
								{"predicate":"phase", "min": 0, "max": 0}
								 // check custom phase
							],
							"set_phase": 1 //set phase,  0 - 20
						}
                        ]                 
				}
			]
		}
	]
}

//all the predicate in previous versions is allowed. check and refer to the previous example in curseforge.